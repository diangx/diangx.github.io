"use strict";(self["webpackChunkdiangx_git_io"]=self["webpackChunkdiangx_git_io"]||[]).push([[269,872],{1068:function(n,t,o){n.exports=o.p+"img/card_macfilter.3fcbaf26.png"},1208:function(n,t,o){n.exports=o.p+"img/card_nlbwmon.02b6e0e7.png"},5663:function(n,t,o){o.r(t),t["default"]=[{name:"nlbwmon",title:"[OpenWrt] nlbwmon package",sub_title:"Simple conntrack netlink based traffic accounting",img:o(1208),show:!0},{name:"macfilter",title:"[TODO] Wi-Fi MAC-Filtering",sub_title:"Register your Mac to control its connection to Wi-Fi",img:o(1068),show:!0}]},8894:function(n,t,o){o.r(t),o.d(t,{default:function(){return f}});var e=function(){var n=this,t=n._self._c;return t("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"container py-4"},[t("h2",{staticClass:"mb-3 text-start"},[n._v(n._s(n.config_data.title))]),t("div",{staticClass:"mb-3"},[n._v(" * Description *"),t("br"),n._v(" Linux 라우터에서 날짜별 네트워크 대역폭 사용량을 측정 및 기록해 주는 패키지 "),t("CodeBlock",{attrs:{language:"shell",codeContent:"github.com/jow-/nlbwmon // reference code\nCONFIG_PACKAGE_nlbwmon=y // openwrt build  defconfig"}})],1),t("div",{staticClass:"mb-3"},[n._v(" * uci config 및 설명 * "),t("CodeBlock",{attrs:{language:"shell",codeContent:"config nlbwmon\n        option netlink_buffer_size 524288 // Netlink(conntrack) 수신 버퍼 크기(바이트)\n        option commit_interval 30s // 메모리 → 디스크 커밋 주기\n        option refresh_interval 30s // 활성 연결 카운터 갱신 주기\n        option database_compress '0' // 데이터베이스 파일 gzip 압축 여부 (0: 미압축, 1: 압축)\n        option database_directory /etc/nlbwmon // 데이터베이스 저장 디렉터리 경로\n        option database_generations 7 // 보관할 데이터베이스 세대 수\n        option database_limit 10000 // 한 파일당 저장할 최대 Flow(엔트리) 수 (0: 무제한)\n        option protocol_database /usr/share/nlbwmon/protocols // 포트·프로토콜 분류용 정의 파일 경로\n        list local_network '172.30.1.0/24' // 트래픽 계정 대상 로컬 네트워크 CIDR 목록\n        list local_network 'lan' // 트래픽 계정 대상 인터페이스 목록"}})],1),t("div",{staticClass:"mb-3"},[n._v(" * usage * "),t("CodeBlock",{attrs:{language:"shell",codeContent:"// 네트워크 사용시 uci database_directory 에 db 기록\nroot@:/etc/nlbwmon# ls -al\ndrwxr-xr-x    2 root     root           448 Jul 16 10:48 .\ndrwxr-xr-x    1 root     root          2232 Jul 15 17:13 ..\n-rw-r-----    1 root     root           184 Jul 15 21:47 20250709.db\n-rw-r-----    1 root     root           400 Jul 16 10:48 20250710.db\n-rw-r-----    1 root     root          3856 Jul 16 00:00 20250715.db\n-rw-r-----    1 root     root           328 Jul 16 10:52 20250716.db\n\n// db 파일 조회 방법\nroot@:/etc/nlbwmon# nlbw -c csv -g mac,ip -q -t 2025-07-15\nmac     ip      conns   rx_bytes        rx_pkts tx_bytes        tx_pkts\n42:0c:af:a4:05:7b       172.30.1.42     3671    58966158        53118   4353622 20659\na0:ce:c8:c7:e9:89       172.30.1.14     16340   54393598        73596   13959633        55981\n92:29:a4:aa:6a:ec       172.30.1.4      6972    40241302        40482   6430071 32270\n38:f3:ab:38:a9:2b       172.30.1.47     2147    274882  852     214019  1448\n92:29:a4:aa:6a:ec       2001:470:ffd0:4:6020:b79d:88ea:8282     24      39246   70      35960   81\n34:02:86:87:ef:61       172.30.1.6      157     13787   73      6904    93\n98:39:10:82:64:9c       172.30.1.254    894     9266    157     5440    170\n98:39:10:82:64:9c       2001:470:ffd0:4::1      2       272     2       158     2\n00:00:00:00:00:00       172.30.1.128    11      212     4       0       0\n98:39:10:82:64:9c       fd1c:3431:1273::1       2       0       0       158     2\n"}})],1),t("div",{staticClass:"mb-3"},[n._v(" * Debug *"),t("br"),t("CodeBlock",{attrs:{language:"shell",codeContent:"// 기본적으로 네트워크가 정상동작 할때 프로세스가 동작함 (hotplug)\n// 옵션에 대한 동작은 init.d 에 있음\nroot@:/etc/nlbwmon# ps -ef | grep nlbwmon\nroot     16604     1  0 10:48 ?        00:00:00 /usr/sbin/nlbwmon -o /etc/nlbwmon -b 524288 -i 30s -r 30s -p /usr/share/nlbwmon/protocols -G 7 -I 2025-07-17/7 -L 10000 -s 172.30.1.0/24 -s 172.30.1.254/24 -s 2001:470:ffd0:4::1/62 -s fd1c:3431:1273::1/60\n\n// 특정 인터페이스 사용량 만들기\n// en6 interface 100MB 생성 명령어\nkimjiwan@mini ~ % curl --interface en6 -o /dev/null http://ipv4.download.thinkbroadband.com/100MB.zip\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  100M  100  100M    0     0   481k      0  0:03:32  0:03:32 --:--:--  556k"}})],1)])},a=[],i=(o(8111),o(116),function(){var n=this,t=n._self._c;return t("div",{directives:[{name:"highlight",rawName:"v-highlight"}]},[t("pre",{staticClass:"bg-light border rounded overflow-auto text-start m-0"},[t("code",{class:["font-monospace",`language-${n.language}`],domProps:{textContent:n._s(n.codeContent)}})])])}),r=[],l={name:"CodeBlock",props:{codeContent:{type:String,required:!0},language:{type:String,default:"javascript"}}},c=l,s=o(1656),d=(0,s.A)(c,i,r,!1,null,null,null),u=d.exports,b=o(5663),g={components:{CodeBlock:u},data(){return{config_data:{}}},mounted(){this.config_data=b["default"].find(n=>"nlbwmon"===n.name)||{}}},m=g,p=(0,s.A)(m,e,a,!1,null,null,null),f=p.exports}}]);
//# sourceMappingURL=post-nlbwmon.b49a6243.js.map